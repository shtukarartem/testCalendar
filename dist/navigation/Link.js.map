{"version":3,"file":"Link.js","names":["_react","_interopRequireDefault","require","_reactRouterDom","_navigation","_excluded","_excluded2","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","Link","_ref","url","children","dispatcher","props","_useLocation","useLocation","pathname","console","log","to","generatePath","scheme","params","e","handler","type","makePagePath","makeModalPath","onClick","otherProps","handleClick","createElement","NavLink","exports"],"sources":["../../src/navigation/Link.tsx"],"sourcesContent":["import React from 'react';\nimport { NavLinkProps, NavLink as RouterLink, generatePath, useLocation } from 'react-router-dom';\n\nimport { makeModalPath, makePagePath } from 'src/navigation';\n\nimport { Scheme } from '../types/types';\n\nexport type Props = Omit<NavLinkProps, 'to'> &\n  React.RefAttributes<HTMLAnchorElement> & {\n    url?: Scheme;\n    dispatcher?: () => void;\n  };\n\nexport const Link: React.FC<Props> = ({ url, children, dispatcher, ...props }) => {\n  const { pathname } = useLocation();\n\n  console.log('inside CRMLink', url);\n\n  if (!url) {\n    return null;\n  }\n\n  let to = null;\n\n  try {\n    to = generatePath(url.scheme, url.params);\n  } catch (e) {\n    // ignore\n  }\n\n  if (!to) {\n    return null;\n  }\n\n  const handler = url.type === 'page' ? makePagePath : makeModalPath;\n\n  const { onClick, ...otherProps } = props;\n\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n    console.log('handleClick', url);\n    dispatcher?.();\n    onClick?.(e);\n  };\n\n  return (\n    <RouterLink to={{ pathname: handler(pathname, to) }} {...otherProps} onClick={handleClick}>\n      {children}\n    </RouterLink>\n  );\n};\n"],"mappings":"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"}